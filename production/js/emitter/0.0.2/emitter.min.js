define("emitter",function(){"use strict";function e(){}var t=/\s+/,i=Object.keys;return i||(i=function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&(i[i.length]=t);return i}),e.prototype.on=function(e,i,n){var r,a,s;if(!i)return this;for(e=e.split(t),r=this.__callbacks||(this.__callbacks={});a=e.shift();)s=r[a]||(r[a]=[]),i.__context=n,s[s.length]=i;return this},e.prototype.once=function(e,i,n){var r,a,s;if(!i)return this;for(e=e.split(t),r=this.__callbacks||(this.__callbacks={});a=e.shift();)s=r[a]||(r[a]=[]),i.__once=!0,i.__context=n,s[s.length]=i;return this},e.prototype.off=function(e,n,r){var a,s,o,l,c;if(!(a=this.__callbacks))return this;if(!(e||n||r))return delete this.__callbacks,this;for(e=e.split(t)||i(a);s=e.shift();)if(o=a[s])if(n||r)for(l=o.length-1;l;--l)c=o[l],n&&c!==n||r&&c.__context!==r||o.splice(l,1);else delete a[s];return this},e.prototype.emit=function(e){var i,n,r,a,s,o,l,c,d=[];if(!(i=this.__callbacks))return this;for(e=e.split(t),s=arguments.length-1;s;--s)d[s-1]=arguments[s];for((r=i.call)&&(l=[0].concat(d));n=e.shift();){if(a=i[n])for(s=0,o=a.length;o>s;++s)c=a[s],c.apply(c.__context||this,d),c.__once&&(a.splice(s--,1),o--);if(a&&r)for(l[0]=n,s=0,o=r.length;o>s;++s)c=r[s],c.apply(c.__context||this,l)}return this},e});