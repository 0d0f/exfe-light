define("emitter",function(){"use strict";function e(){}var t=/\s+/,i=Object.keys;return i||(i=function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&(i[i.length]=t);return i}),e.prototype.on=function(e,i,n){var a,r,s;if(!i)return this;for(e=e.split(t),a=this.__callbacks||(this.__callbacks={});r=e.shift();)s=a[r]||(a[r]=[]),i.__context=n,s[s.length]=i;return this},e.prototype.once=function(e,i,n){var a,r,s;if(!i)return this;for(e=e.split(t),a=this.__callbacks||(this.__callbacks={});r=e.shift();)s=a[r]||(a[r]=[]),i.__once=!0,i.__context=n,s[s.length]=i;return this},e.prototype.off=function(e,n,a){var r,s,o,l,c;if(!(r=this.__callbacks))return this;if(!(e||n||a))return delete this.__callbacks,this;for(e=e.split(t)||i(r);s=e.shift();)if(o=r[s])if(n||a)for(l=o.length-1;l;--l)c=o[l],n&&c!==n||a&&c.__context!==a||o.splice(l,1);else delete r[s];return this},e.prototype.emit=function(e){var i,n,a,r,s,o,l,c,d=[];if(!(i=this.__callbacks))return this;for(e=e.split(t),s=arguments.length-1;s;--s)d[s-1]=arguments[s];for((a=i.call)&&(l=[0].concat(d));n=e.shift();){if(r=i[n])for(s=0,o=r.length;o>s;++s)c=r[s],c.apply(c.__context||this,d),c.__once&&(r.splice(s--,1),o--);if(r&&a)for(l[0]=n,s=0,o=a.length;o>s;++s)c=a[s],c.apply(c.__context||this,l)}return this},e});