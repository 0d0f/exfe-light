define(function(t){"use strict";var e=t("tween"),n=t("af"),i=n.request,r=t("mobilemiddleware"),s=t("mobilecontroller").FooterController,a=t("mobileroutes"),o=t("lightsaber"),c=window.App=o();c.use(r.setHtmlHeight),c.use(r.cleanup),c.initRouter(),c.use(r.errorHandler),c.controllers={},c.controllers.footer=new s({App:c}),c.get(/^\/+(?:\?)?#{0,}$/,a.index),c.get(/^\/+(?:\?)?#live\/?$/,a.live),c.get(/^\/+\?t=([a-zA-Z0-9]{3,})$/,function(t,e){var n=function(){var t,e=document.getElementsByTagName("head")[0],n=document.getElementsByName("sms-token")[0];return n&&(t=JSON.parse(n.content),e.removeChild(n)),t},i=n();if(i){var r=i.action;t.session.resolveToken=i,"VERIFIED"===r?e.redirect("/#verify"):"INPUT_NEW_PASSWORD"===r&&e.redirect("/#set_password")}else t.error={code:404},t.redirect("/")}),c.get(/^\/+(?:\?)?#verify\/?$/,a.verify),c.get(/^\/+(?:\?)?#set_password\/?$/,a.setPassword),c.get(/^\/+(?:\?)?#token=([a-zA-Z0-9]{64})\/?$/,a.resolveToken),c.get(/^\/+(?:\?)?#!([1-9][0-9]*)\/([a-zA-Z0-9]{4})\/?$/,a.crossPhoneToken),c.get(/^\/+(?:\?)?#!token=([a-zA-Z0-9]{32})\/?$/,a.crossToken),c.on("launched",function(){function t(){i(t),e.update()}t()})});