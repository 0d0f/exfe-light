define(function(e,t,n){e("zepto");var r=e("config"),i=function(){},s=function(){},o=function(e){$("#app-main").html('<div>Password: <input type="text" id="password"><button id="submit">Submit</button><div>'),$("#submit").click(function(){var t=$("#password").val();t.length>=4?$.ajax({type:"post",url:r.api_url+"/Users/ResetPassword",data:{token:e,password:t},success:function(e){e&&(e=JSON.parse(e))&&e.meta.code===200&&e.response.authorization&&(console.log(e.response.authorization),alert("Done"))},error:function(){}}):alert("Password must be longer than four!")})},u=function(e){$.ajax({type:"post",url:r.api_url+"/Users/ResolveToken",data:{token:e},success:function(t){if(t&&(t=JSON.parse(t))&&t.meta.code===200){switch(t.response.token_type){case"VERIFY":break;case"SET_PASSWORD":}switch(t.response.action){case"VERIFIED":break;case"INPUT_NEW_PASSWORD":o(e)}}},error:function(){}})},a=document.location.hash.replace(/^#/,"");a||i(),a=a.split("/");for(var f=0;f<a.length;f++)a[f].match(/token=.*/)?u(a[f].replace(/token=(.*)/,"$1",a[f])):a[f].match(/!token=.*/)&&s()});