define("mobilemiddleware",function(t,e,n){"use strict";var i=function(){var t=document.getElementsByTagName("head")[0],e=document.getElementsByName("sms-token")[0],n=null;return e&&(n=JSON.parse(e.content),t.removeChild(e)),n},r=navigator.userAgent.match(/iPhone/);n.exports={setHtmlHeight:function(t,e,n){setTimeout(function(){window.scrollTo(0,0)},0),r||$("#app-main").addClass("app-box");var i=document.documentElement,s=window.innerHeight,o=t.app;s>=444?s=508:356>=s&&(s=420),o.screen={width:320,height:s,ios:420>=s?"iphone4":""},i.style.minHeight=s+"px",n()},checkStorageSupported:function(t,e,n){try{var i=window.localStorage;i&&(i.setItem("storage",0),i.removeItem("storage"))}catch(r){alert("EXFE cannot be used in private browsing mode.")}n()},checkSMSToken:function(t,e,n){var r=i();if(r){var s=r.action;return t.resolveToken=r,"VERIFIED"===s?e.redirect("/#verify"):"INPUT_NEW_PASSWORD"===s&&e.redirect("/#set_password"),void 0}n()},cleanup:function(t,e,n){delete t.smsToken,$("#app-body").css("height","auto"),$("#app-header").addClass("hide"),$("#app-footer").removeClass("ft-bg");var i=t.switchPageCallback;i?i():$("#app-body .page").addClass("hide"),delete t.switchPageCallback,n()},errorHandler:function(t,e){t.error={code:404},e.redirect("/")}}});