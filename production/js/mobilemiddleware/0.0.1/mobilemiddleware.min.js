define("mobilemiddleware",function(e,t,n){"use strict";var r=function(){var e=document.getElementsByTagName("head")[0],t=document.getElementsByName("sms-token")[0],n=null;return t&&(n=JSON.parse(t.content),e.removeChild(t)),n},i=navigator.userAgent.match(/iPhone/);n.exports={setHtmlHeight:function(e,t,n){setTimeout(function(){window.scrollTo(0,0)},0),i||$("#app-main").addClass("app-box");var r=document.documentElement,s=window.innerHeight,o=e.app;s>=444?s=508:s<=356&&(s=420),o.screen={width:320,height:s,ios:s<=420?"iphone4":""},r.style.minHeight=s+"px",n()},checkStorageSupported:function(e,t,n){try{var r=window.localStorage;r&&(r.setItem("storage",0),r.removeItem("storage"))}catch(i){alert("EXFE cannot be used in private browsing mode.")}n()},checkSMSToken:function(e,t,n){var i=r();if(i){var s=i.action;e.smsToken=i,"VERIFIED"===s?t.redirect("/#verify"):"INPUT_NEW_PASSWORD"===s&&t.redirect("/#set_password");return}n()},cleanup:function(e,t,n){delete e.smsToken,$("#app-header").addClass("hide"),$("#app-footer").removeClass("ft-bg");var r=e.switchPageCallback;r?r():$("#app-body .page").addClass("hide"),delete e.switchPageCallback,n()},errorHandler:function(e,t){e.error={code:404},t.redirect("/")}}});