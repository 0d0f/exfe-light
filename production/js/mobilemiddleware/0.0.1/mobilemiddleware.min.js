define("mobilemiddleware",function(e,t,i){"use strict";var n=function(){var e=document.getElementsByTagName("head")[0],t=document.getElementsByName("sms-token")[0],i=null;return t&&(i=JSON.parse(t.content),e.removeChild(t)),i},r=navigator.userAgent.match(/iPhone/);i.exports={setHtmlHeight:function(e,t,i){setTimeout(function(){window.scrollTo(0,0)},0),r||$("#app-main").addClass("app-box");var n=document.documentElement,a=window.innerHeight,s=e.app;a>=444?a=508:356>=a&&(a=420),s.screen={width:320,height:a,ios:420>=a?"iphone4":""},n.style.minHeight=a+"px",i()},checkStorageSupported:function(e,t,i){try{var n=window.localStorage;n&&(n.setItem("storage",0),n.removeItem("storage"))}catch(r){alert("EXFE cannot be used in private browsing mode.")}i()},checkSMSToken:function(e,t,i){var r=n();if(r){var a=r.action;return e.resolveToken=r,"VERIFIED"===a?t.redirect("/#verify"):"INPUT_NEW_PASSWORD"===a&&t.redirect("/#set_password"),void 0}i()},cleanup:function(e,t,i){delete e.smsToken,$("#app-body").css("height","auto"),$("#app-header").addClass("hide"),$("#app-footer").removeClass("ft-bg");var n=e.switchPageCallback;n?n():$("#app-body .page").addClass("hide"),delete e.switchPageCallback,i()},errorHandler:function(e,t){e.error={code:404},t.redirect("/")}}});