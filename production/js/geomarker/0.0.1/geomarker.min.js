define("geomarker",function(){"use strict";function t(t){this.options=t||{},this.div_=null,this.setMap(this.map_=this.options.map),delete this.options.map;var e=(this.options,document.createElement("div")),n=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div");r.id="gps-circle",r.style.display="none",i.id="gps-dsnt",i.style.display="none",n.id="gps-arrow",e.id="gps-marker",e.appendChild(r),e.appendChild(i),e.appendChild(n),this.circle_=r,this.dsnt_=i,this.arrow_=n,this.div_=e,this.needleAngle=0,this.accuracy=0,this.currentHeading=0}var e=t.prototype=new google.maps.OverlayView;return e.onAdd=function(){var t=this.getPanes().overlayLayer;t.parentNode.style.zIndex=t.style.zIndex=605,t.appendChild(this.div_),this.listen()},e.onRemove=function(){this.div_.parentNode.removeChild(this.div_),this.div_=null},e.draw=function(){var t=this.getProjection();if(t){var e=t.fromLatLngToDivPixel(this.latlng),n=this.options,i=this.div_;i.style.top=e.y-n.height/2+"px",i.style.left=e.x-n.width/2+"px"}},e.toggleDsntCircle=function(t){this.circle_.style.display=t?"block":"none",this.dsnt_.style.display=t?"block":"none"},e.setDsntRotate=function(t){var e=this.dsnt_.style;e.webkitTransform=e.transform="rotate("+t+"deg)"},e.setArrowRotate=function(t){var e=this.arrow_.style;e.webkitTransform=e.transform="rotate("+t+"deg)"},e.rotateNeedle=function(){var t=Math.floor(this.needleAngle/360),e=this.needleAngle-360*t,n=this.currentHeading-e;Math.abs(n)>180&&(0>n?n+=360:n-=360),n/=5,this.needleAngle+=n,this.needleAngle-window.orientation,this.setArrowRotate(360-this.needleAngle)},e.orientationHandle=function(){var t=this;return function(e){void 0!=e.webkitCompassHeading?(t.currentHeading=360-e.webkitCompassHeading,t.accuracy=e.webkitCompassAccuracy):null!=e.alpha&&(t.currentHeading=-1*(270-e.alpha),t.accuracy=e.webkitCompassAccuracy),t.rotateNeedle()}},e.listen=function(){window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",this.orientationHandle(),!1)},e.setStatus=function(t){this.arrow_.className=t?"online":""},e.getPosition=function(){return this.latlng},e.setPosition=function(t){this.latlng=t,this.draw()},t});