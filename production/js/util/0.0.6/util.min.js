define("util",function(){"use strict";var e=/^\s+/,t=/\s+$/,n=/[^0-9a-zA-Z_\u4e00-\u9fa5\ \'\.]+/g,r=String.prototype.trim,i={zh_CN:n,cut30length:function(e){return e.replace(n," ").substring(0,30)},utf8length:function(e){var t=e.length,n=0,r=0,i;for(;r<t;r++){i=e.charCodeAt(r);if(i<127)n++;else if(i<=2047)n+=2;else if(i<=55295||57344<=i)n+=3;else{if(!(i<=56319))throw"Error: Invalid UTF-16 sequence. Missing high-surrogate code.";i=e.charCodeAt(++r);if(i<56320||57343<i)throw"Error: Invalid UTF-16 sequence. Missing low-surrogate code.";n+=4}}return n},trim:r?function(e){return e===null?"":r.call(e)}:function(n){return n===null?"":n.toString().replace(e,"").replace(t,"")},parseId:function(){function s(s){var o={},u;s=i.trim(s);if(u=s.match(e))o.name=u[1],o.external_username=u[1],o.provider="facebook";else if(u=s.match(t))o.name=u[1]||u[2],o.external_username=o.name,o.provider="twitter";else if(n.test(s))o.name=i.cut30length(s.split("@")[0]),o.external_username=s,o.provider="email";else if(r.test(s)){var a=s.indexOf("<");o.name=i.cut30length(s.substring(0,a).replace(/^"|^'|"$|'$/g,"")),o.external_username=o.name,o.provider="email"}else o.name=s,o.provider=null;return o}var e=/^([a-z0-9_\.]{1,})@facebook$/i,t=/^@([a-z0-9_]{1,15})$|^@?([a-z0-9_]{1,15})@twitter$/i,n=/^[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,r=/^[^@]*<[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?>$/i;return s}(),tokenRegExp:/token=([a-zA-Z0-9]{32})/,printExtUserName:function(e){var t=e.external_username,n=e.provider;switch(n){case"twitter":t="@"+t;break;case"facebook":t+="@facebook";break;case"phone":/^\+1\d{10}$/.test(t)?t=t.replace(/^(\+1)(\d{3})(\d{3})(\d{4})$/,"$1 ($2) $3-$4"):/^\+86\d{11}$/.test(t)&&(t=t.replace(/^(\+86)(\d{3})(\d{4})(\d{4})$/,"$1 $2 $3 $4"))}return t}};return i});