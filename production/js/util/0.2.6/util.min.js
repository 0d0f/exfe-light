define("util",function(){"use strict";var e=/^\s+/,t=/\s+$/,n=/[^0-9a-zA-Z_\u4e00-\u9fa5\ \'\.]+/g,r=String.prototype.trim,i={zh_CN:n,cut30length:function(e,t){if(!e)return"";for(e=e.replace(n," "),t||(t=30);i.utf8length(e)>t;)e=e.substring(0,e.length-1);return e},utf8length:function(e){for(var t,n=e.length,r=0,i=0;n>i;i++)if(t=e.charCodeAt(i),127>t)r++;else if(2047>=t)r+=2;else if(55295>=t||t>=57344)r+=3;else{if(!(56319>=t))throw"Error: Invalid UTF-16 sequence. Missing high-surrogate code.";if(t=e.charCodeAt(++i),56320>t||t>57343)throw"Error: Invalid UTF-16 sequence. Missing low-surrogate code.";r+=4}return r},trim:r?function(e){return null==e?"":r.call(e)}:function(n){return null==n?"":(""+n).replace(e,"").replace(t,"")},parseId:function(){var e=/^([a-z0-9_\.]{1,})@facebook$/i,t=/^@([a-z0-9_]{1,15})$|^@?([a-z0-9_]{1,15})@twitter$/i,n=/^([a-z0-9_\.]{1,})@instagram$/i,r=/^(.*)@dropbox$/i,o=/^(.*)@flickr$/i,s=/^[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,a=/^[^@]*<[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?>$/i,l=/^(\+)?((?:(86)?(1(?:3\d|4[57]|5\d|8\d)\d{8}))|(?:(1)?(\d{5,15})))$/;return function(u){var c,h={};if(u=i.trim(u),(c=u.match(r))&&s.test(c[1]))h.name=c[1],h.external_username=c[1],h.provider="dropbox";else if(c=u.match(o))h.name=c[1],h.external_username=c[1],h.provider="flickr";else if(c=u.match(n))h.name=c[1],h.external_username=c[1],h.provider="instagram";else if(c=u.match(e))h.name=c[1],h.external_username=c[1],h.provider="facebook";else if(c=u.match(t))h.name=c[1]||c[2],h.external_username=h.name,h.provider="twitter";else if(s.test(u))h.name=i.cut30length(u.split("@")[0]),h.external_username=u,h.provider="email";else if(a.test(u)){var p=u.indexOf("<");h.name=i.cut30length(u.substring(0,p).replace(/^"|^'|"$|'$/g,"")),h.external_username=h.name,h.provider="email"}else if(c=u.replace(/[\s\-\(\)\_]/g,"").match(l)){var f,d,g=c[1];h.provider="phone",g?c[3]&&c[4]?(f=c[3],d=c[4],h.name=h.external_username=g+f+d):c[5]&&c[6]?(f=c[5],d=c[6],h.name=h.external_username=g+f+d):(h.name=u,h.provider=null):(g="+",c[4]?(f="86",d=c[4]):(f="1",d=c[2]),h.name=h.external_username=g+f+d)}else h.name=u,h.provider=null;return h}}(),tokenRegExp:/token=([a-zA-Z0-9]{32})/,printExtUserName:function(e,t){var n=e.external_username,r=e.provider;switch(r){case"twitter":n="@"+n+"@"+r;break;case"facebook":case"instagram":case"flickr":case"dropbox":n+="@"+r;break;case"phone":t&&(/^\+1\d{10}$/.test(n)?n=n.replace(/^(\+1)(\d{3})(\d{3})(\d{4})$/,"$1 ($2) $3-$4"):/^\+86\d{11}$/.test(n)&&(n=n.replace(/^(\+86)(\d{3})(\d{4})(\d{4})$/,"$1 $2 $3 $4")))}return n}};return i});