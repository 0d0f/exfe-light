define("util",function(){"use strict";var t=/^\s+/,e=/\s+$/,n=/[^0-9a-zA-Z_\u4e00-\u9fa5\ \'\.]+/g,i=String.prototype.trim,r={zh_CN:n,cut30length:function(t,e){if(!t)return"";for(t=t.replace(n," "),e||(e=30);r.utf8length(t)>e;)t=t.substring(0,t.length-1);return t},utf8length:function(t){for(var e,n=t.length,i=0,r=0;n>r;r++)if(e=t.charCodeAt(r),127>e)i++;else if(2047>=e)i+=2;else if(55295>=e||e>=57344)i+=3;else{if(!(56319>=e))throw"Error: Invalid UTF-16 sequence. Missing high-surrogate code.";if(e=t.charCodeAt(++r),56320>e||e>57343)throw"Error: Invalid UTF-16 sequence. Missing low-surrogate code.";i+=4}return i},trim:i?function(t){return null==t?"":i.call(t)}:function(n){return null==n?"":(""+n).replace(t,"").replace(e,"")},parseId:function(){var t=/^([a-z0-9_\.]{1,})@facebook$/i,e=/^@([a-z0-9_]{1,15})$|^@?([a-z0-9_]{1,15})@twitter$/i,n=/^([a-z0-9_\.]{1,})@instagram$/i,i=/^(.*)@dropbox$/i,s=/^(.*)@flickr$/i,o=/^[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,a=/^[^@]*<[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?>$/i,u=/^(\+)?((?:(86)?(1(?:3\d|4[57]|5\d|8\d)\d{8}))|(?:(1)?(\d{5,15})))$/;return function(c){var l,h={};if(c=r.trim(c),(l=c.match(i))&&o.test(l[1]))h.name=l[1],h.external_username=l[1],h.provider="dropbox";else if(l=c.match(s))h.name=l[1],h.external_username=l[1],h.provider="flickr";else if(l=c.match(n))h.name=l[1],h.external_username=l[1],h.provider="instagram";else if(l=c.match(t))h.name=l[1],h.external_username=l[1],h.provider="facebook";else if(l=c.match(e))h.name=l[1]||l[2],h.external_username=h.name,h.provider="twitter";else if(o.test(c))h.name=r.cut30length(c.split("@")[0]),h.external_username=c,h.provider="email";else if(a.test(c)){var p=c.indexOf("<");h.name=r.cut30length(c.substring(0,p).replace(/^"|^'|"$|'$/g,"")),h.external_username=h.name,h.provider="email"}else if(l=c.replace(/[\s\-\(\)\_]/g,"").match(u)){var f,d,m=l[1];h.provider="phone",m?l[3]&&l[4]?(f=l[3],d=l[4],h.name=h.external_username=m+f+d):l[5]&&l[6]?(f=l[5],d=l[6],h.name=h.external_username=m+f+d):(h.name=c,h.provider=null):(m="+",l[4]?(f="86",d=l[4]):(f="1",d=l[2]),h.name=h.external_username=m+f+d)}else h.name=c,h.provider=null;return h}}(),tokenRegExp:/token=([a-zA-Z0-9]{32})/,printExtUserName:function(t,e){var n=t.external_username,i=t.provider;switch(i){case"twitter":n="@"+n+"@"+i;break;case"facebook":case"instagram":case"flickr":case"dropbox":n+="@"+i;break;case"phone":e&&(/^\+1\d{10}$/.test(n)?n=n.replace(/^(\+1)(\d{3})(\d{3})(\d{4})$/,"$1 ($2) $3-$4"):/^\+86\d{11}$/.test(n)&&(n=n.replace(/^(\+86)(\d{3})(\d{4})(\d{4})$/,"$1 $2 $3 $4")))}return n}};return r});