define("util",function(){"use strict";var e=/^\s+/,t=/\s+$/,i=/[^0-9a-zA-Z_\u4e00-\u9fa5\ \'\.]+/g,n=String.prototype.trim,r={zh_CN:i,cut30length:function(e,t){if(!e)return"";for(e=e.replace(i," "),t||(t=30);r.utf8length(e)>t;)e=e.substring(0,e.length-1);return e},utf8length:function(e){for(var t,i=e.length,n=0,r=0;i>r;r++)if(t=e.charCodeAt(r),127>t)n++;else if(2047>=t)n+=2;else if(55295>=t||t>=57344)n+=3;else{if(!(56319>=t))throw"Error: Invalid UTF-16 sequence. Missing high-surrogate code.";if(t=e.charCodeAt(++r),56320>t||t>57343)throw"Error: Invalid UTF-16 sequence. Missing low-surrogate code.";n+=4}return n},trim:n?function(e){return null==e?"":n.call(e)}:function(i){return null==i?"":(""+i).replace(e,"").replace(t,"")},parseId:function(){var e=/^([a-z0-9_\.]{1,})@facebook$/i,t=/^@([a-z0-9_]{1,15})$|^@?([a-z0-9_]{1,15})@twitter$/i,i=/^([a-z0-9_\.]{1,})@instagram$/i,n=/^(.*)@dropbox$/i,a=/^(.*)@flickr$/i,s=/^[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,o=/^[^@]*<[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?>$/i,l=/^(\+)?((?:(86)?(1(?:3\d|4[57]|5\d|8\d)\d{8}))|(?:(1)?(\d{5,15})))$/;return function(c){var u,d={};if(c=r.trim(c),(u=c.match(n))&&s.test(u[1]))d.name=u[1],d.external_username=u[1],d.provider="dropbox";else if(u=c.match(a))d.name=u[1],d.external_username=u[1],d.provider="flickr";else if(u=c.match(i))d.name=u[1],d.external_username=u[1],d.provider="instagram";else if(u=c.match(e))d.name=u[1],d.external_username=u[1],d.provider="facebook";else if(u=c.match(t))d.name=u[1]||u[2],d.external_username=d.name,d.provider="twitter";else if(s.test(c))d.name=r.cut30length(c.split("@")[0]),d.external_username=c,d.provider="email";else if(o.test(c)){var h=c.indexOf("<");d.name=r.cut30length(c.substring(0,h).replace(/^"|^'|"$|'$/g,"")),d.external_username=d.name,d.provider="email"}else if(u=c.replace(/[\s\-\(\)\_]/g,"").match(l)){var p,f,m=u[1];d.provider="phone",m?u[3]&&u[4]?(p=u[3],f=u[4],d.name=d.external_username=m+p+f):u[5]&&u[6]?(p=u[5],f=u[6],d.name=d.external_username=m+p+f):(d.name=c,d.provider=null):(m="+",u[4]?(p="86",f=u[4]):(p="1",f=u[2]),d.name=d.external_username=m+p+f)}else d.name=c,d.provider=null;return d}}(),tokenRegExp:/token=([a-zA-Z0-9]{32})/,printExtUserName:function(e,t){var i=e.external_username,n=e.provider;switch(n){case"twitter":i="@"+i+"@"+n;break;case"facebook":case"instagram":case"flickr":case"dropbox":i+="@"+n;break;case"phone":t&&(/^\+1\d{10}$/.test(i)?i=i.replace(/^(\+1)(\d{3})(\d{3})(\d{4})$/,"$1 ($2) $3-$4"):/^\+86\d{11}$/.test(i)&&(i=i.replace(/^(\+86)(\d{3})(\d{4})(\d{4})$/,"$1 $2 $3 $4")))}return i}};return r});