define("util",function(){"use strict";var e=/^\s+/,t=/\s+$/,n=/[^0-9a-zA-Z_\u4e00-\u9fa5\ \'\.]+/g,r=String.prototype.trim,i={zh_CN:n,cut30length:function(e){return e.replace(n," ").substring(0,30)},utf8length:function(e){var t=e.length,n=0,r=0,i;for(;r<t;r++){i=e.charCodeAt(r);if(i<127)n++;else if(i<=2047)n+=2;else if(i<=55295||57344<=i)n+=3;else{if(!(i<=56319))throw"Error: Invalid UTF-16 sequence. Missing high-surrogate code.";i=e.charCodeAt(++r);if(i<56320||57343<i)throw"Error: Invalid UTF-16 sequence. Missing low-surrogate code.";n+=4}}return n},trim:r?function(e){return e===null?"":r.call(e)}:function(n){return n===null?"":n.toString().replace(e,"").replace(t,"")},parseId:function(){var e=/^([a-z0-9_\.]{1,})@facebook$/i,t=/^@([a-z0-9_]{1,15})$|^@?([a-z0-9_]{1,15})@twitter$/i,n=/^[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,r=/^[^@]*<[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?>$/i,s=/^(\+)?((?:(86)?(1(?:3\d|4[57]|5\d|8\d)\d{8}))|(?:(1)?(\d{5,15})))$/;return function(u){var a={},f;u=i.trim(u);if(f=u.match(e))a.name=f[1],a.external_username=f[1],a.provider="facebook";else if(f=u.match(t))a.name=f[1]||f[2],a.external_username=a.name,a.provider="twitter";else if(n.test(u))a.name=i.cut30length(u.split("@")[0]),a.external_username=u,a.provider="email";else if(r.test(u)){var l=u.indexOf("<");a.name=i.cut30length(u.substring(0,l).replace(/^"|^'|"$|'$/g,"")),a.external_username=a.name,a.provider="email"}else if(f=u.replace(/[\s\-\(\)\_]/g,"").match(s)){var c=f[1],h,p;a.provider="phone",c?f[3]&&f[4]?(h=f[3],p=f[4],a.name=a.external_username=c+h+p):f[5]&&f[6]?(h=f[5],p=f[6],a.name=a.external_username=c+h+p):(a.name=u,a.provider=null):(c="+",f[4]?(h="86",p=f[4]):(h="1",p=f[2]),a.name=a.external_username=c+h+p)}else a.name=u,a.provider=null;return a}}(),tokenRegExp:/token=([a-zA-Z0-9]{32})/,printExtUserName:function(e,t){var n=e.external_username,r=e.provider;switch(r){case"twitter":n="@"+n+"@"+r;break;case"facebook":case"instagram":case"flickr":n+="@"+r;break;case"phone":t&&(/^\+1\d{10}$/.test(n)?n=n.replace(/^(\+1)(\d{3})(\d{3})(\d{4})$/,"$1 ($2) $3-$4"):/^\+86\d{11}$/.test(n)&&(n=n.replace(/^(\+86)(\d{3})(\d{4})(\d{4})$/,"$1 $2 $3 $4")))}return n}};return i});