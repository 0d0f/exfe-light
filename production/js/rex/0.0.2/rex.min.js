define("rex",function(){"use strict";function t(t,r){return new n(t,r)}function n(t,n){this._value=t,this._context=n||r,this._chained=!1}var r=null,e=Array.prototype,i=Object.prototype,o=i.hasOwnProperty,u=i.toString,c=e.slice,s=e.indexof,f=e.lastIndexOf,a=e.reduce,l=e.reduceRight,h={};h.each=function(t,n,r){var e,i=t.length;if(i===+i)for(e=0;i>e;++e)e in t&&n.call(r,t[e],e,t);else for(e in t)h.has(t,e)&&n.call(r,e,t[e],t)},h.map=function(t,n,r){var e,i,o=[],u=t.length;if(u===+u)for(e=0;u>e;++e)e in t&&(o[e]=n.call(r,t[e],e,t));else{i=0;for(e in t)h.has(t,e)&&(o[i++]=n.call(r,e,t[e],t))}return o},h.some=function(t,n,r){for(var e=0,i=t.length;i>e;++e)if(e in t&&n.call(r,t[e],e,t))return!0;return!1},h.every=function(t,n,r){for(var e=0,i=t.length;i>e;++e)if(e in t&&!n.call(r,t[e],e,t))return!1;return!0},h.filter=h.select=function(t,n,r){for(var e=[],i=0,o=0,u=t.length;u>i;++i)if(i in t){if(!n.call(r,t[i],i,t))continue;e[o++]=t[i]}return e},h.indexOf=s?function(t,n,r){return t.indexOf(n,isFinite(r)?r:0)}:function(t,n,r){var e=t.length;if(!e)return-1;if(r||(r=0),r>e)return-1;for(0>r&&(r=Math.max(0,e+r));e>r;++r)if(r in t&&t[r]===n)return r;return-1},h.lastIndexOf=f?function(t,n,r){return t.lastIndexOf(n,isFinite(r)?r:t.length)}:function(t,n,r){var e=t.length;if(r=e-1,!e)return-1;for(arguments.length>1&&(r=Math.min(r,arguments[1])),0>r&&(r+=e);r>=0;--r)if(r in t&&t[r]===n)return r;return-1},h.reduce=a?function(t,n,r,e){return t.reduce(n,r,e)}:function(t,n,r,e){t||(t=[]);var i=0,o=t.length;if(3>arguments.length)for(;;){if(i in t){r=t[i++];break}if(++i>=o)throw new TypeError("Empty array")}for(;o>i;i++)i in t&&(r=n.call(e,r,t[i],i,t));return r},h.reduceRight=l?function(t,n,r,e){return t.reduce(n,r,e)}:function(t,n,r,e){t||(t=[]);var i=t.length-1;if(3>arguments.length)for(;;){if(i in t){r=t[i--];break}if(0>--i)throw new TypeError("Empty array")}for(;i>=0;--i)i in t&&(r=n.call(e,r,t[i],i,t));return r},h.find=function(t,n,r){for(var e,i=0,o=t.length;o>i;++i)if(i in t&&n.call(r,t[i],i,t)){e=t[i];break}return e},h.reject=function(t,n,r){for(var e=[],i=0,o=t.length;o>i;++i)if(i in t){if(n.call(r,t[i],i,t))continue;e[i++]=t[i]}return e},h.toArray=function(t){if(!t)return[];if(h.isArray(t))return t;if(t.toArray)return t.toArray();if(h.isArgs(t))return c.call(t);var n,r=[],e=0;for(n in t)h.has(t,n)&&(r[e++]=t[n]);return r},h.first=function(t){return t[0]},h.last=function(t){return t[t.length-1]},h.size=function(t){return h.toArray(t).length},h.compact=function(t){return h.filter(t,function(t){return!!t})},h.flatten=function(t){return h.reduce(t,function(t,n){return h.isArray(n)?t.concat(h.flatten(n)):(t[t.length]=n,t)},[])},h.unique=function(t){var n=[],r=t.length-1,e=0;t:for(;r>=0;--r){for(;n.length>e;++e)if(n[e]===t[r])continue t;n[n.length]=t[r]}return n},h.merge=function(t,n){var r,e=t.length,i=0;if(isFinite(n.length))for(r=n.length;r>i;i++)t[e++]=n[i];else for(;void 0!==n[i];)t[e++]=n[i++];return t.length=e,t},h.inArray=function(t,n){return!!~h.indexOf(t,n)},h.compose=function(){function t(){for(n=arguments;e>=0;--e)n=[r[e].apply(this,n)];return n[0]}var n,r=arguments,e=r.length;return t},h.has=function(t,n){return o.call(t,n)},h.keys=Object.keys||function(t){var n,r=[],e=0;for(n in t)h.has(t,n)&&(r[e++]=n);return r},h.values=function(t){var n,r=[],e=0;for(n in t)h.has(t,n)&&(r[e++]=t[n]);return r},h.extend=function(){},h.mixin=function(t,n){var r;for(r in n)t[r]=n[r]},h.tap=function(t,n){var r;return n&&(r=n(t)),r?r:t},h.nextTick=function(t){setTimeout(t,0)},h.countDown=function(t,n){function r(){0===--t&&n()}return r},h.isFunction=function(t){return"function"==typeof t},h.isString=function(t){return"[object String]"===u.call(t)},h.isElement=function(t){return!(!t||!t.nodeType||1!=t.nodeType)},h.isArray=Array.isArray||function(t){return t instanceof Array},h.isArrayLike=function(t){return t&&t.length&&isFinite(t.length)},h.isObject=function(t){return t instanceof Object&&!h.isFunction(t)&&!h.isArray(t)},h.isDate=function(t){return!!(t&&t.getTimezoneOffset&&t.setUTCFullYear)},h.isRegex=function(t){return!(!(t&&t.test&&t.exec)||!t.ignoreCase&&t.ignoreCase!==!1)},h.isUndefined=function(t){return t===void 0},h.isDefined=function(t){return t!==void 0},h.isNaN=function(t){return t!==t},h.isNull=function(t){return null===t},h.isNumber=function(t){return"[object Number]"===u.call(t)},h.isBoolean=function(t){return t===!0||t===!1},h.isArgs=function(t){return!(!t||!h.has(t,"callee"))},h.isEmpty=function(t){return h.isArray(t)?0===t.length:h.isObject(t)?function(){for(var n in t){n=1;break}return!!n}():""===t},t.chain=function(t,r){return new n(t,r).chain()},h.mixin(t,h);var p=n.prototype;return p.constructor=n,p.chain=function(){return this._chained=!0,this},p.value=function(){return this._value},t.each(h.keys(h),function(n,r){r=t[n],p[n]=function(){for(var t=0,n=this._value,e=arguments.length,i=[n];e>t;++t)i[t+1]=arguments[t];return n=r.apply(this._context,i),this._value=n,this._chained?this:n}}),t});