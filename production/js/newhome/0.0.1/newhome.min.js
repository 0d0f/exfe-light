define(function(o){"use strict";var t=o("jquery"),s=680,e=1200,a=e-s,i=200,n=220,r=n-i,c=70,m=120,l=m-c,f=function(o,t,m){return s>o?o=s:o>e&&(o=e),t=c+l*(o-s)/a,m=(i+r*(o-s)/a)/n,[o,t,m]},h=Math.floor,d=Math.min;t(function(){var o,s,e,a,i,n,r,c,m,l,p,u,g,v=t(window),y=t(document),b=t(".top-mask"),k=t(".home header"),w=t(".exfe-logo"),x=t(".login"),z=x[0].style,C=t(".intros"),M=t(".introduction"),T=C.find(".intro").not(M),_=t("#bloom");v.off("*.home").on("scroll.home",function(){var o,t=v.scrollTop(),a=d(t,200)/200,r=x[0].getBoundingClientRect();M.css("opacity",.5+.5*a),T.css("opacity",.2+.8*a),n[0]>t?(b.attr("class","top-mask hide"),b[0].style.fillOpacity=0):t>=n[0]&&(b.attr("class","top-mask"),b[0].style.fillOpacity=(d(t,n[1])-n[0])/(n[1]-n[0])),r.top<(o=50)?(i=1,z.position="fixed",z.top=o+"px"):50===r.top&&h(t)<=(o=h(s-e-36-30))-50&&(i=0,z.position="absolute",z.top=o+"px")}).on("resize.home",function(){o=f(v.height(),0),s=o[0],e=o[1],a=o[2];var t=(s-460)/2,l=h(s-e-36-30);k.css("top",e),w.css("top",t),i||x.css("top",l),C.css("top",s-30),n=[t+460-120,l];var p="scale("+a+")";w.css({"-webkit-transform":p,"-moz-transform":p,"-ms-transform":p,"-o-transform":p,transform:p});var u=w.offset();r=u.left+220,c=u.top+220,m=d(r,c),v.trigger("scroll.home")}),y.off("*.home").on("mousemove.home touchstart.home touchmove.home",function(o){o.preventDefault();var t,s,e=o.type;if("touchmove"===e||"touchstart"===e){var a=o.originalEvent.touches[0];t=a.pageX,s=a.pageY}else t=o.pageX,s=o.pageY;l=t-r,p=s-c,u=4*((0>l?1:-1)*d(Math.abs(l),m)/m),g=4*((0>p?1:-1)*d(Math.abs(p),m)/m);var i="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+u+", "+g+", 1, 1)";_.css({"-webkit-transform":i,"-moz-transform":i,"-ms-transform":i,"-o-transform":i,transform:i})}).on("click.home",".introduction img",function(){t("html, body").animate({scrollTop:"+=100"},233)}).on("click.home","#logo, .xbtn-start",function(){var o={options:{onShowAfter:function(){var o=this.element;o.css({top:(s-460)/2}),o.find("#identity").focusend()},onHideAfter:function(){this.$(".modal-body").eq(0).css("opacity",1),this.switchTabType="d00",this._oauth_&&this._oauth_.abort();var o=this.element;this.offSrcNode(),this.destory(),o.remove(),t(".popmenu").remove(),t("#js-modal-backdrop").addClass("hide").css("opacity",0)},backdrop:!1,viewData:{cls:"modal-id home-dialog"}}};t(".sign-in").data("dialog-settings",o).trigger("click.dialog.data-api").data("dialog-settings",null)}),v.trigger("resize.home"),t(".home").removeClass("hidden").addClass("start")})});