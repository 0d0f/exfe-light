define(function(t){"use strict";var o=t("jquery"),e={content:"width=device-width, initial-scale=0.87, user-scalable=no, maximum-scale=1",media:"only screen and (min-device-width: 768px) and (max-device-width: 1024px)"},i={content:"width=device-width, initial-scale=0.35, user-scalable=no, maximum-scale=1",media:"only screen and (min-device-width: 320px) and (max-device-width: 568px)"},a=document.getElementById("viewport");navigator.userAgent.match(/iPhone/i)?(a.setAttribute("content",i.content),a.setAttribute("media",i.media)):navigator.userAgent.match(/iPad/i)&&(a.setAttribute("content",e.content),a.setAttribute("media",e.media));var n=680,s=1200,r=s-n,c=200,m=220,d=m-c,h=70,l=120,u=l-h,f=function(t,o,e){return n>t?t=n:t>s&&(t=s),o=h+u*(t-n)/r,e=(c+d*(t-n)/r)/m,[t,o,e]},p=Math.floor,g=Math.min;o(function(){var t,e,i,a,n,s,r,c,m,d,h,l,u,v=o(window),b=o(document),w=o(".home header"),y=o(".exfe-logo"),x=o(".login"),k=x[0].style,A=o(".intros"),C=o(".introduction"),M=A.find(".intro").not(C),T=o("#bloom"),z=0;v.off("*.home").on("scroll.home",function(){z=v.scrollTop();var t,o=g(z,200)/200,a=x[0].getBoundingClientRect();C.css("opacity",.5+.5*o),M.css("opacity",.2+.8*o),a.top<(t=50)?(n=1,k.position="fixed",k.top=t+"px"):50===a.top&&p(z)<=(t=p(e-i-36-30))-50&&(n=0,k.position="absolute",k.top=t+"px")}).on("resize.home",function(){t=f(v.height(),0),e=t[0],i=t[1],a=t[2];var o=(e-460)/2,d=p(e-i-36-30);w.css("top",i),y.css("top",o),n||x.css("top",d),A.css("top",e-30),s=[o+460-120,d];var h="matrix3d("+a+", 0, 0, 0, 0, "+a+", 0, 0, 0, 0, 1, 0, 0, 0, 1, 1)";y.css({"-webkit-transform":h,"-moz-transform":h,"-ms-transform":h,"-o-transform":h,transform:h});var l=y.offset();r=l.left+220,c=l.top+220,m=g(r,c),v.trigger("scroll.home")}),b.off("*.home").on("mousemove.home touchstart.home touchmove.home",function(t){var o,e,i=t.type;if("touchmove"===i||"touchstart"===i){var a=t.originalEvent.touches[0];o=a.pageX,e=a.pageY}else o=t.pageX,e=t.pageY;d=o-r,h=e-c,l=4*((0>d?1:-1)*g(Math.abs(d),m)/m),u=4*((0>h?1:-1)*g(Math.abs(h),m)/m);var n="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+l+", "+u+", 1, 1)";T.css({"-webkit-transform":n,"-moz-transform":n,"-ms-transform":n,"-o-transform":n,transform:n})}).on("click.home touchstart.home",".introduction img",function(t){t.stopPropagation(),o("html, body").animate({scrollTop:e-30-150},233)}).on("click.home touchstart.home","body",function(){0>=z&&!o(this).hasClass("shake")&&o(this).addClass("shake")}).on("webkitAnimationEnd.home oanimationend.home MSAnimationEnd.home animationend.home","body",function(){o(this).removeClass("shake")}).on("click.home touchstart.home","#logo, .xbtn-start",function(){var t={options:{onShowAfter:function(){var t=this.element;t.css({top:(e-460)/2+v.scrollTop()}),t.find("#identity").focusend()},onHideAfter:function(){this.$(".modal-body").eq(0).css("opacity",1),this.switchTabType="d00",this._oauth_&&this._oauth_.abort();var t=this.element;this.offSrcNode(),this.destory(),t.remove(),o(".popmenu").remove(),o("#js-modal-backdrop").addClass("hide").css("opacity",0)},backdrop:!1,viewData:{cls:"modal-id home-dialog"}}};o(".sign-in").data("dialog-settings",t).trigger("click.dialog.data-api").data("dialog-settings",null)}),v.trigger("resize.home"),o(".home").removeClass("hidden").addClass("start")})});