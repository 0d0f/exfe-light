define(function(o){"use strict";var t=o("jquery"),s=680,e=1200,a=e-s,i=200,r=220,n=r-i,c=70,m=120,l=m-c,h=function(o,t,m){return s>o?o=s:o>e&&(o=e),t=c+l*(o-s)/a,m=(i+n*(o-s)/a)/r,[o,t,m]},f=Math.floor,p=Math.min;t(function(){var o,s,e,a,i,r,n,c,m,l,d,u,g,v=t(window),y=t(document),b=t(".top-mask"),k=t(".home header"),w=t(".exfe-logo"),x=t(".login"),T=x[0].style,z=t(".intros"),C=t(".introduction"),M=z.find(".intro").not(C),_=t("#bloom");v.off("*.home").on("scroll.home",function(){var o,t=v.scrollTop(),a=p(t,200)/200,n=x[0].getBoundingClientRect();C.css("opacity",.5+.5*a),M.css("opacity",.2+.8*a),r[0]>t?(b.attr("class","top-mask hide"),b[0].style.fillOpacity=0):t>=r[0]&&(b.attr("class","top-mask"),b[0].style.fillOpacity=(p(t,r[1])-r[0])/(r[1]-r[0])),n.top<(o=50)?(i=1,T.position="fixed",T.top=o+"px"):50===n.top&&f(t)<=(o=f(s-e-36-30))-50&&(i=0,T.position="absolute",T.top=o+"px")}).on("resize.home",function(){o=h(v.height(),0),s=o[0],e=o[1],a=o[2];var t=(s-460)/2,l=f(s-e-36-30);k.css("top",e),w.css("top",t),i||x.css("top",l),z.css("top",s-30),r=[t+460-120,l];var d="matrix3d("+a+", 0, 0, 0, 0, "+a+", 0, 0, 0, 0, 1, 0, 1, 1, 1, 1)";w.css({"-webkit-transform":d,"-moz-transform":d,"-ms-transform":d,"-o-transform":d,transform:d});var u=w.offset();n=u.left+220,c=u.top+220,m=p(n,c),v.trigger("scroll.home")}),y.off("*.home").on("mousemove.home touchstart.home touchmove.home",function(o){o.preventDefault();var t,s,e=o.type;if("touchmove"===e||"touchstart"===e){var a=o.originalEvent.touches[0];t=a.pageX,s=a.pageY}else t=o.pageX,s=o.pageY;l=t-n,d=s-c,u=4*((0>l?1:-1)*p(Math.abs(l),m)/m),g=4*((0>d?1:-1)*p(Math.abs(d),m)/m);var i="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+u+", "+g+", 1, 1)";_.css({"-webkit-transform":i,"-moz-transform":i,"-ms-transform":i,"-o-transform":i,transform:i})}).on("click.home",".introduction img",function(){t("html, body").animate({scrollTop:"+=50"},233)}).on("click.home","#logo, .xbtn-start",function(){var o={options:{onShowAfter:function(){var o=this.element;o.css({top:v.height()/2+v.scrollTop(),marginTop:-o.height()/2})},onHideAfter:function(){this.$(".modal-body").eq(0).css("opacity",1),this.switchTabType="d00",this._oauth_&&this._oauth_.abort();var o=this.element;this.offSrcNode(),this.destory(),o.remove(),t(".popmenu").remove(),t("#js-modal-backdrop").addClass("hide").css("opacity",0)},backdrop:!1,viewData:{cls:"modal-id home-dialog"}}};t(".sign-in").data("dialog-settings",o).trigger("click.dialog.data-api").data("dialog-settings",null)}),v.trigger("resize.home"),t(".home").removeClass("hidden").addClass("start")})});