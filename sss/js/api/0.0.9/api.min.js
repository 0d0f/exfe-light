define("api",function(e){"use strict";function a(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function l(e,t,i){var s={},o,u,l;return a(s,f),a(s,e),o=n(),u=o.promise(),l=r(s).done(function(e,t,n){var r=e&&e.meta&&e.meta.code;200===r?o.resolve(e.response,t,n):o.reject(e,r,t,n)}).fail(function(e,t,n){var r=e&&e.meta&&e.meta.code;o.reject(e,r,t,n)}),u.jqXHR=l,u.abort=function(e){l&&(l.abort(e),l=o=u=void 0)},u.done(t).fail(i).always(function(){l=o=u=void 0}),u}var t=e("jquery"),n=t.Deferred,r=t.ajax,i=t.param,s=e("config"),o={base_url:s.api_url,signin:"/Users/signin",getRegistrationFlag:"/Users/getRegistrationFlag",getUser:"/Users/:user_id",signout:"/Users/signout/:user_id",updateUser:"/Users/update",setPassword:"/Users/:user_id/setPassword",crosses:"/Users/:user_id/crosses",crosslist:"/Users/:user_id/crosslist",addIdentity:"/Users/addIdentity",deleteIdentity:"/Users/deleteIdentity",setDefaultIdentity:"/Users/setDefaultIdentity",mergeIdentities:"/Users/mergeIdentities",getIdentityById:"/Identities/:identity_id",complete:"/Identities/complete",getIdentity:"/Identities/get",updateIdentity:"/Identities/:identity_id/update",getCross:"/Crosses/:cross_id",gather:"/Crosses/gather",editCross:"/Crosses/:cross_id/edit",rsvp:"/Exfee/:exfee_id/rsvp",editExfee:"/Exfee/:exfee_id/edit",conversation:"/Conversation/:exfee_id",addConversation:"/Conversation/:exfee_id/add",verifyIdentity:"/Users/verifyIdentity",verifyUserIdentity:"/Users/verifyUserIdentity",forgotPassword:"/Users/forgotPassword",avatarUpdate:"/Avatar/update",getCrossByInvitationToken:"/Crosses/getCrossByInvitationToken",resolveToken:"/Users/resolveToken",resetPassword:"/Users/resetPassword",setupUserByInvitationToken:"/Users/setupUserByInvitationToken",getInvitationByToken:"/Crosses/:cross_id/getInvitationByToken",recognize:"/time/recognize",sortIdentities:"/Users/:user_id/sortIdentities",photox_getPhotoX:"/photox/:photox_id",photox_borwseSource:"/photox/browseSource",photox_getPhoto:"/photox/GetPhoto",photox_add:"/photox/:photox_id/Add",photox_getLikes:"/photox/:photox_id/GetLikes",photox_like:"/photox/Like",photox_del:"/photox/:photox_id/Delete"},u={_token:null,setToken:function(e){this._token=e},getToken:function(){return this._token},request:function(e,t,n,r){var s=o[e],a,f=t.params,c=t.resources;if(!s)return;f||(f={}),f&&(u._token&&!f.token&&(f.token=u._token),f=i(f),s+=f?"?"+f:"");if(c)for(a in c)s=s.replace(":"+a,encodeURIComponent(c[a]));return t.url=o.base_url+s,delete t.params,delete t.resources,l(t,n,r)}},f={type:"GET",dataType:"JSON",timeout:1e4,cache:!1,xhrFields:{withCredentials:!0}};return u});