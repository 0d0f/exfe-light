define("util",function(){"use strict";var e=/^\s+/,t=/\s+$/,n=/[^0-9a-zA-Z_\u4e00-\u9fa5\ \'\.]+/g,r=String.prototype.trim,i={zh_CN:n,cut30length:function(e){return e.replace(n," ").substring(0,30)},utf8length:function(e){var t=e.length,n=0,r=0,i;for(;r<t;r++){i=e.charCodeAt(r);if(i<127)n++;else if(i<=2047)n+=2;else if(i<=55295||57344<=i)n+=3;else{if(!(i<=56319))throw"Error: Invalid UTF-16 sequence. Missing high-surrogate code.";i=e.charCodeAt(++r);if(i<56320||57343<i)throw"Error: Invalid UTF-16 sequence. Missing low-surrogate code.";n+=4}}return n},trim:r?function(e){return e===null?"":r.call(e)}:function(n){return n===null?"":n.toString().replace(e,"").replace(t,"")},parseId:function(){function o(o){var u={},a;o=i.trim(o);if(a=o.match(e))u.name=a[1],u.external_username=a[1],u.provider="facebook";else if(a=o.match(t))u.name=a[1]||a[2],u.external_username=u.name,u.provider="twitter";else if(n.test(o))u.name=i.cut30length(o.split("@")[0]),u.external_username=o,u.provider="email";else if(r.test(o)){var f=o.indexOf("<");u.name=i.cut30length(o.substring(0,f).replace(/^"|^'|"$|'$/g,"")),u.external_username=u.name,u.provider="email"}else if(a=o.replace(/[\s\-\(\)\_]/g,"").match(s)){var l=a[1],c,h;u.provider="phone",l?a[3]&&a[4]?(c=a[3],h=a[4],u.name=u.external_username=l+c+h):a[5]&&a[6]?(c=a[5],h=a[6],u.name=u.external_username=l+c+h):(u.name=o,u.provider=null):(l="+",a[4]?(c="86",h=a[4]):(c="1",h=a[2]),u.name=u.external_username=l+c+h)}else u.name=o,u.provider=null;return u}var e=/^([a-z0-9_\.]{1,})@facebook$/i,t=/^@([a-z0-9_]{1,15})$|^@?([a-z0-9_]{1,15})@twitter$/i,n=/^[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,r=/^[^@]*<[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?>$/i,s=/^(\+)?((?:(86)?(1(?:3\d|4[57]|5\d|8\d)\d{8}))|(?:(1)?(\d{5,15})))$/;return o}(),tokenRegExp:/token=([a-zA-Z0-9]{32})/,printExtUserName:function(e,t){var n=e.external_username,r=e.provider;switch(r){case"twitter":n="@"+n;break;case"facebook":n+="@facebook";break;case"phone":t&&(/^\+1\d{10}$/.test(n)?n=n.replace(/^(\+1)(\d{3})(\d{3})(\d{4})$/,"$1 ($2) $3-$4"):/^\+86\d{11}$/.test(n)&&(n=n.replace(/^(\+86)(\d{3})(\d{4})(\d{4})$/,"$1 $2 $3 $4")))}return n}};return i});