define("util",function(){"use strict";var e=/^\s+/,t=/\s+$/,n=/[^0-9a-zA-Z_\u4e00-\u9fa5\ \'\.]+/g,r=String.prototype.trim,i={zh_CN:n,cut30length:function(e,t){if(!e)return"";e=e.replace(n," "),t||(t=30);while(i.utf8length(e)>t)e=e.substring(0,e.length-1);return e},utf8length:function(e){var t=e.length,n=0,r=0,i;for(;r<t;r++){i=e.charCodeAt(r);if(i<127)n++;else if(i<=2047)n+=2;else if(i<=55295||57344<=i)n+=3;else{if(!(i<=56319))throw"Error: Invalid UTF-16 sequence. Missing high-surrogate code.";i=e.charCodeAt(++r);if(i<56320||57343<i)throw"Error: Invalid UTF-16 sequence. Missing low-surrogate code.";n+=4}}return n},trim:r?function(e){return e==null?"":r.call(e)}:function(n){return n==null?"":n.toString().replace(e,"").replace(t,"")},parseId:function(){var e=/^([a-z0-9_\.]{1,})@facebook$/i,t=/^@([a-z0-9_]{1,15})$|^@?([a-z0-9_]{1,15})@twitter$/i,n=/^([a-z0-9_\.]{1,})@instagram$/i,r=/^(.*)@dropbox$/i,s=/^(.*)@flickr$/i,o=/^[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,u=/^[^@]*<[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?>$/i,a=/^(\+)?((?:(86)?(1(?:3\d|4[57]|5\d|8\d)\d{8}))|(?:(1)?(\d{5,15})))$/;return function(l){var c={},h;l=i.trim(l);if((h=l.match(r))&&o.test(h[1]))c.name=h[1],c.external_username=h[1],c.provider="dropbox";else if(h=l.match(s))c.name=h[1],c.external_username=h[1],c.provider="flickr";else if(h=l.match(n))c.name=h[1],c.external_username=h[1],c.provider="instagram";else if(h=l.match(e))c.name=h[1],c.external_username=h[1],c.provider="facebook";else if(h=l.match(t))c.name=h[1]||h[2],c.external_username=c.name,c.provider="twitter";else if(o.test(l))c.name=i.cut30length(l.split("@")[0]),c.external_username=l,c.provider="email";else if(u.test(l)){var p=l.indexOf("<");c.name=i.cut30length(l.substring(0,p).replace(/^"|^'|"$|'$/g,"")),c.external_username=c.name,c.provider="email"}else if(h=l.replace(/[\s\-\(\)\_]/g,"").match(a)){var d=h[1],v,m;c.provider="phone",d?h[3]&&h[4]?(v=h[3],m=h[4],c.name=c.external_username=d+v+m):h[5]&&h[6]?(v=h[5],m=h[6],c.name=c.external_username=d+v+m):(c.name=l,c.provider=null):(d="+",h[4]?(v="86",m=h[4]):(v="1",m=h[2]),c.name=c.external_username=d+v+m)}else c.name=l,c.provider=null;return c}}(),tokenRegExp:/token=([a-zA-Z0-9]{32})/,printExtUserName:function(e,t){var n=e.external_username,r=e.provider;switch(r){case"twitter":n="@"+n+"@"+r;break;case"facebook":case"instagram":case"flickr":case"dropbox":n+="@"+r;break;case"phone":t&&(/^\+1\d{10}$/.test(n)?n=n.replace(/^(\+1)(\d{3})(\d{3})(\d{4})$/,"$1 ($2) $3-$4"):/^\+86\d{11}$/.test(n)&&(n=n.replace(/^(\+86)(\d{3})(\d{4})(\d{4})$/,"$1 $2 $3 $4")))}return n}};return i});